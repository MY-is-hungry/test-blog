<% content_for :title, "Posts" %>

<div class="container">
  <h1>Posts</h1>

  <p>
    <%= link_to "New Post", new_post_path, class: "button" %>
  </p>

  <% if @posts.any? %>
    <ul>
      <% @posts.each do |post| %>
        <li>
          <h3><%= link_to post.title, post %></h3>
          <p><%= truncate(strip_tags(post.body.to_s), length: 140) %></p>
          <small><%= l(post.created_at, format: :short) %></small>
          <div>
            <% if post.tags.any? %>
              <small>
                Tags:
                <% post.tags.order(:name).each do |tag| %>
                  <%= link_to "##{tag.name}", tag_path(tag.name) %>
                <% end %>
              </small>
              <br>
            <% end %>
            <%= link_to "Edit", edit_post_path(post) %> |
            <%= link_to "Delete", post, data: { turbo_method: :delete, turbo_confirm: "Are you sure?" } %>
          </div>
        </li>
      <% end %>
    </ul>
  <% else %>
    <p>No posts yet.</p>
  <% end %>
</div>
